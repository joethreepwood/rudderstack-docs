---
title: "Send Events using Beacon"
description: >-
  Detailed technical description of the navigator.sendBeacon utility to send event payloads using JavaScript SDK.
---

The [JavaScript SDK v1.1](https://cdn.rudderlabs.com/v1.1/rudder-analytics.min.js) sends the event payloads using the **XHR** (XMLHttpRequest) API by default.

However, you can choose to send the event payloads using the [`navigator.sendBeacon`](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon) browser utility. It asynchronously sends a small amount of data over HTTP to the RudderStack server. To send the SDK events using the `navigator.sendBeacon` utility, set the `useBeacon` field in the [`load()`](https://rudderstack.com/docs/stream-sources/rudderstack-sdk-integration-guides/rudderstack-javascript-sdk/#the-options-parameter) call options to `true`.

<div class="warningBlock">
The <code class="inline-code">sendBeacon</code> version of the JavaScript SDK located <a href="https://cdn.rudderlabs.com/v2/rudder-analytics.min.js?transport=beacon">here</a> and its XMLHTTP version located <a href="https://cdn.rudderlabs.com/v2/rudder-analytics.min.js">here</a> are <strong>not supported</strong> anymore. 
</div>

The JavaScript SDK internally uses a separate queue (`BeaconQueueOpts`) to hold the data and sends it through the `navigator.sendBeacon` utility in batches. The structure of `BeaconQueueOpts` is shown below:

```javascript
{
  maxItems: 10 
  flushQueueInterval: 600000
}
```

| Parameter        | Type          | Description             | Default Value    |
| :-------------------- | :------------------ | :-------------| :----------------|
| `maxItems`            | Integer            | SDK flushes the queue when the default number of payloads is reached.    | `10`             |
| `flushQueueInterval`  | Integer       | SDK flushes the queue after the default time interval (in milliseconds). | `600000`         |


<div class="infoBlock">
JavaScript SDK flushes the Beacon queue if the total size of the payload exceeds 64 KB before reaching the <code class="inline-code">maxItems</code>/<code class="inline-code">flushQueueInterval</code> value in the configuration.
</div>

## Advantages

There are two key advantages of using the [`navigator.sendBeacon`](https://developer.mozilla.org/en-US/docs/Web/API/Navigator/sendBeacon) utility to send your event payload:

- Pushing events to the Beacon queue is faster as compared to the XHR instrumentation, so there are some performance improvements in the JavaScript SDK.
- The Beacon requests are optimized so that the browser waits until the CPU load is lower, or until the network is free before making the actual requests. This leads to a better website performance.

<div class="infoBlock">
The Beacon queue maintained by the browsers has a limitation on the total size of the elements present in the queue at any point and <strong>peaks at 64 KB</strong>.
</div>

## Event delivery and retry mechanism

This section highlights some important points which will help you choose whether to use `navigator.sendBeacon` for sending your event payloads:

- The Beacon requests sent from the SDK using the `navigator.sendBeacon` utility only pushes the events to browser's Beacon queue. Further, it depends on the browser's engine to send these events from the queue. Hence, RudderStack **does not guarantee** if any events get discarded due to the 5xx or other network-related errors (request timed out, end resource unavailable, etc.).

<div class="warningBlock">
If event delivery and retry is an important requirement for your website, it is highly recommended to use the XHR API of the JavaScript SDK, where RudderStack retries event delivery based on the status codes and other errors.
</div>

- The Beacon queue maintained by the browsers has a limitation on the total size of the elements present in the queue at any point, and peaks out at **64 KB**. Therefore, you cannot send high frequency hits from the main thread in one go, as the Beacon queue cannot take up cycles to dequeue itself. The JavaScript SDK handles this by maintaining a separate queue which retries pushing events to the Beacon queue in case they are not successfully pushed in the first attempt. 

<div class="successBlock">
The RudderStack queue handles approximately 500 hits per 30ms and ensures eventual successful delivery of events after retries to Beacon.
</div>

## Contact us

For queries on any of the sections in this guide, you can [contact us](mailto:%20docs@rudderstack.com) or start a conversation in our [Slack](https://rudderstack.com/join-rudderstack-slack-community) community.
